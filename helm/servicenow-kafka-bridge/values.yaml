replicaCount: 1

image:
  repository: ghcr.io/raikasurendra/servicenow-kafka-bridge
  pullPolicy: IfNotPresent
  tag: "0.1.0"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "8080"
  prometheus.io/path: "/metrics"

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
      - ALL

service:
  type: ClusterIP
  port: 8080

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 256Mi

livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 10
  periodSeconds: 15

readinessProbe:
  httpGet:
    path: /readyz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10

nodeSelector: {}
tolerations: []
affinity: {}

# Bridge configuration â€” override via configMap or env vars
config:
  # ServiceNow connection
  servicenow:
    baseUrl: ""
    auth:
      type: "oauth"
      # Set credentials via environment variables:
      #   SN_CLIENT_ID, SN_CLIENT_SECRET, SN_USERNAME, SN_PASSWORD

  # Kafka connection
  kafka:
    brokers:
      - "kafka:9092"

  # Source pipeline
  source:
    enabled: true
    topicPrefix: "servicenow"
    tables: []

  # Sink pipeline
  sink:
    enabled: false
    topics: []

  # Offset storage
  offset:
    storage: "file"
    filePath: "/app/data/offsets.json"

  # Observability
  observability:
    metricsAddr: ":8080"

# Extra environment variables (for secrets)
extraEnv: []
# - name: SN_CLIENT_ID
#   valueFrom:
#     secretKeyRef:
#       name: servicenow-creds
#       key: client-id

# Persistent volume for offset storage
persistence:
  enabled: true
  storageClass: ""
  accessModes:
    - ReadWriteOnce
  size: 1Gi
